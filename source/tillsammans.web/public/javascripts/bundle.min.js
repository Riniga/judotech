class User{constructor(e,t){this.username=e,this.name=t}}function signIn(){var e=document.getElementById("username").value,t=document.getElementById("password").value;fetch("http://localhost:7071/api/Login",{method:"post",headers:{"Content-Type":"application/text"},body:"{ username: '"+e+"', password: '"+t+"'  }"}).then(e=>e.json()).then(e=>{console.log("token: "+e.token),"00000000-0000-0000-0000-000000000000"!=e.token?(SuccessfullLogin(e),window.location.href="/start.html"):ShowFailedLogin()}).catch(e=>{console.log(e),ShowFailedLogin()})}function signOut(){localStorage.removeItem("currentUser"),ResetLoginUI()}function SuccessfullLogin(e){e=new User(e.username,e.fullName);localStorage.setItem("currentUser",JSON.stringify(e)),ResetLoginUI()}function ShowFailedLogin(){document.getElementById("username").setAttribute("aria-invalid","true"),document.getElementById("password").setAttribute("aria-invalid","true"),document.getElementById("failedlogin").style.visibility="visible"}function ResetLoginUI(){currentUser=localStorage.getItem("currentUser");var e=document.getElementById("login"),t=document.getElementById("logout");(currentUser?(document.getElementById("userFirstName").innerHTML=JSON.parse(currentUser).name,e.setAttribute("hidden","true"),t):("/"!=window.location.pathname&&(window.location.href="/"),t.setAttribute("hidden","true"),e)).removeAttribute("hidden"),document.getElementById("username").setAttribute("aria-invalid","false"),document.getElementById("password").setAttribute("aria-invalid","false"),document.getElementById("failedlogin").style.visibility="hidden"}ResetLoginUI();const isOpenClass="modal-is-open",openingClass="modal-is-opening",closingClass="modal-is-closing",animationDuration=400;let visibleModal=null;const toggleModal=e=>{e.preventDefault();e=document.getElementById(e.currentTarget.getAttribute("data-target"));(void 0!==e&&null!=e&&isModalOpen(e)?closeModal:openModal)(e)},isModalOpen=e=>!(!e.hasAttribute("open")||"false"==e.getAttribute("open")),openModal=e=>{isScrollbarVisible()&&document.documentElement.style.setProperty("--scrollbar-width",getScrollbarWidth()+"px"),document.documentElement.classList.add(isOpenClass,openingClass),setTimeout(()=>{visibleModal=e,document.documentElement.classList.remove(openingClass)},animationDuration),e.setAttribute("open",!0)},closeModal=e=>{visibleModal=null,document.documentElement.classList.add(closingClass),setTimeout(()=>{document.documentElement.classList.remove(closingClass,isOpenClass),document.documentElement.style.removeProperty("--scrollbar-width"),e.removeAttribute("open")},animationDuration)},getScrollbarWidth=(document.addEventListener("click",e=>{null==visibleModal||visibleModal.querySelector("article").contains(e.target)||closeModal(visibleModal)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&null!=visibleModal&&closeModal(visibleModal)}),()=>{var e=document.createElement("div"),t=(e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e),document.createElement("div")),t=(e.appendChild(t),e.offsetWidth-t.offsetWidth);return e.parentNode.removeChild(e),t}),isScrollbarVisible=()=>document.body.scrollHeight>screen.height;